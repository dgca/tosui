---
phase: 05-data-display
plan: 01
type: execute
subsystem: ui
---

<objective>
Create Avatar component - a user/entity avatar with fallback.

Purpose: Display user images with initials fallback when image unavailable.
Output: Avatar component with image, fallback initials, sizes, and shapes.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Key files:**
@packages/react/src/components/Box/Box.tsx

**Established patterns:**
- Box wrapper with semantic props
- Size variants (sm/md/lg)
- CSS Modules for styling

**Constraining decisions:**
- Use existing color tokens
- Initials fallback when no image src
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Avatar component</name>
  <files>packages/react/src/components/Avatar/Avatar.tsx, packages/react/src/components/Avatar/avatar.module.css, packages/react/src/components/Avatar/index.tsx</files>
  <action>
Create Avatar as user/entity display:

1. Avatar.tsx:
   - Props: src (optional image URL), name (for generating initials), size (sm/md/lg/xl, default md), rounded (full/md, default full)
   - Size dimensions: sm=32px, md=40px, lg=48px, xl=64px
   - If src provided: show image with object-fit cover
   - If no src but name: show initials (first letter of first+last word)
   - If neither: show generic user icon or empty
   - Background for initials: primary-subtle, color: primary
   - Uses img element with onError handler to fallback to initials

2. avatar.module.css:
   - Size variants
   - Image styling (object-fit: cover)
   - Initials styling (flex center, font weight)

3. index.tsx: Export component and types

Pattern: Standard avatar with graceful fallback.
  </action>
  <verify>pnpm f:lib build succeeds</verify>
  <done>Avatar component created with image, initials fallback, size variants</done>
</task>

<task type="auto">
  <name>Task 2: Export Avatar from library</name>
  <files>packages/react/src/index.tsx</files>
  <action>
Add export for Avatar:
- export { Avatar, type AvatarSize, type AvatarProps } from "./components/Avatar";
  </action>
  <verify>pnpm f:lib build succeeds, Avatar importable from @tosui/react</verify>
  <done>Avatar exported from @tosui/react</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `pnpm f:lib build` succeeds
- [ ] Avatar displays image when src provided
- [ ] Avatar shows initials when no src
- [ ] All sizes render correctly
- [ ] Rounded variants work (full, md)
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors
- Avatar gracefully handles missing images
</success_criteria>

<output>
After completion, create `.planning/phases/05-data-display/05-01-SUMMARY.md`
</output>
