# Plan: Tabs Component

## Objective

Create Tabs, TabList, Tab, and TabPanel components for tabbed interfaces with controlled state.

## Tasks

### Task 1: Create Tabs Components

Create `packages/react/src/components/Tabs/`:

**Tabs.tsx:**
```tsx
import { type ReactNode, createContext, useContext, useState } from "react";
import clsx from "clsx";
import { Box } from "@/components/Box/Box";
import styles from "./tabs.module.css";

// Context for tab state
type TabsContextValue = {
  activeIndex: number;
  setActiveIndex: (index: number) => void;
};

const TabsContext = createContext<TabsContextValue | null>(null);

function useTabsContext() {
  const context = useContext(TabsContext);
  if (!context) throw new Error("Tab components must be used within Tabs");
  return context;
}

// Types
export type TabsVariant = "line" | "enclosed";

export type TabsProps = {
  /** Default active tab index */
  defaultIndex?: number;
  /** Controlled active index */
  index?: number;
  /** Callback when tab changes */
  onChange?: (index: number) => void;
  /** Visual variant */
  variant?: TabsVariant;
  /** Additional class name */
  className?: string;
  /** Tab components */
  children?: ReactNode;
};

export type TabListProps = {
  className?: string;
  children?: ReactNode;
};

export type TabProps = {
  /** Tab index (set automatically) */
  index?: number;
  /** Disabled state */
  disabled?: boolean;
  className?: string;
  children?: ReactNode;
};

export type TabPanelProps = {
  /** Panel index (set automatically) */
  index?: number;
  className?: string;
  children?: ReactNode;
};

// Tabs container with context
export function Tabs({
  defaultIndex = 0,
  index,
  onChange,
  variant = "line",
  className,
  children,
}: TabsProps) {
  const [internalIndex, setInternalIndex] = useState(defaultIndex);
  const activeIndex = index ?? internalIndex;

  const setActiveIndex = (newIndex: number) => {
    if (index === undefined) setInternalIndex(newIndex);
    onChange?.(newIndex);
  };

  return (
    <TabsContext.Provider value={{ activeIndex, setActiveIndex }}>
      <Box className={clsx(styles.tabs, styles[variant], className)}>
        {children}
      </Box>
    </TabsContext.Provider>
  );
}

// TabList - horizontal container for tabs
export function TabList({ className, children }: TabListProps) {
  return (
    <Box
      as="div"
      role="tablist"
      display="flex"
      gap={0}
      borderBottom="thin"
      borderColor="border"
      className={clsx(styles.tabList, className)}
    >
      {children}
    </Box>
  );
}

// Tab - individual tab button
export function Tab({ index = 0, disabled = false, className, children }: TabProps) {
  const { activeIndex, setActiveIndex } = useTabsContext();
  const isActive = activeIndex === index;

  return (
    <Box
      as="button"
      type="button"
      role="tab"
      aria-selected={isActive}
      aria-disabled={disabled}
      disabled={disabled}
      onClick={() => !disabled && setActiveIndex(index)}
      py={2}
      px={4}
      fontSize="sm"
      fontWeight={isActive ? "medium" : "normal"}
      color={isActive ? "primary" : "foreground-muted"}
      bg="transparent"
      border="none"
      cursor={disabled ? "not-allowed" : "pointer"}
      opacity={disabled ? "faint" : undefined}
      className={clsx(styles.tab, isActive && styles.active, className)}
    >
      {children}
    </Box>
  );
}

// TabPanel - content panel
export function TabPanel({ index = 0, className, children }: TabPanelProps) {
  const { activeIndex } = useTabsContext();

  if (activeIndex !== index) return null;

  return (
    <Box
      role="tabpanel"
      p={4}
      className={clsx(styles.tabPanel, className)}
    >
      {children}
    </Box>
  );
}
```

**tabs.module.css:**
```css
.tabs {
  width: 100%;
}

.tabList {
  margin-bottom: 0;
}

.tab {
  position: relative;
  transition: color 0.15s ease;
  margin-bottom: -1px;
}

.tab:hover:not(:disabled) {
  color: var(--t-color-primary-default);
}

/* Line variant - bottom border indicator */
.line .tab::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: transparent;
  transition: background 0.15s ease;
}

.line .tab.active::after {
  background: var(--t-color-primary-default);
}

/* Enclosed variant - tab-like borders */
.enclosed .tabList {
  border-bottom: none;
}

.enclosed .tab {
  border: 1px solid transparent;
  border-bottom: 1px solid var(--t-color-border);
  border-radius: var(--t-radius-md) var(--t-radius-md) 0 0;
  margin-bottom: -1px;
}

.enclosed .tab.active {
  border-color: var(--t-color-border);
  border-bottom-color: var(--t-color-background);
  background: var(--t-color-background);
}

.tabPanel {
  /* Panel styles */
}
```

**index.tsx:**
```tsx
export { Tabs, TabList, Tab, TabPanel } from "./Tabs";
export type { TabsVariant, TabsProps, TabListProps, TabProps, TabPanelProps } from "./Tabs";
```

### Task 2: Export Tabs and Verify Build

1. Add exports to `packages/react/src/index.tsx`
2. Run build to verify

## Verification

- [ ] Tabs switch content on click
- [ ] variant="line" shows bottom border indicator
- [ ] variant="enclosed" shows enclosed tab style
- [ ] Disabled tabs cannot be clicked
- [ ] Controlled mode (index prop) works
- [ ] Build passes

## Output

- `packages/react/src/components/Tabs/Tabs.tsx`
- `packages/react/src/components/Tabs/tabs.module.css`
- `packages/react/src/components/Tabs/index.tsx`
